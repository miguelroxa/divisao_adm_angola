<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divisão Político-Administrativa de Angola (Estrutura Definitiva)</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

    <style>
        /* Variáveis de Cor para Fácil Ajuste */
        :root {
            --cor-principal: #3F0B79;    /* Roxo Escuro */
            --cor-secundaria: #BD4BF8;  /* Roxo Vivo para Destaque */
            --fundo-secundario: #f7f2ff; /* Roxo Muito Claro */
        }
        
        /* Estilos de Fundo e Layout */
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background-color: #f4f4f4;
            color: var(--cor-principal); 
        }
        .container { 
            background: white; 
            padding: 30px; 
            border-radius: 8px; 
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); 
            max-width: 600px; 
            margin: auto; 
            margin-bottom: 20px; 
        }
        .info { 
            margin-top: 20px; 
            padding: 10px; 
            border: 1px solid #ddd; 
            border-radius: 4px; 
            background-color: #eee; 
            text-align: center;
            color: var(--cor-principal);
            font-weight: bold;
            font-size: 0.9em;
        }

        /* AJUSTE DO TAMANHO DO TÍTULO */
        h1 { 
            color: var(--cor-principal); 
            text-align: center; 
            margin-bottom: 5px; 
            font-size: 1.8em; 
        }
        
        /* Estilo dos Dropdown (Labels e Selects) */
        label { 
            display: block; 
            margin-top: 15px; 
            font-weight: bold; 
            color: var(--cor-principal); 
        }
        select { 
            width: 100%; 
            padding: 10px; 
            margin-top: 5px; 
            border: 2px solid var(--cor-principal); 
            border-radius: 4px; 
            box-sizing: border-box; 
            color: var(--cor-principal); 
            background-color: var(--fundo-secundario); 
        }
        select:disabled {
            background-color: #f0f0f0;
            cursor: not-allowed;
            opacity: 0.7;
        }

        /* Contador de Totais */
        .contador-totais {
            margin-top: 15px;
            padding: 15px;
            border: 2px solid var(--cor-secundaria); 
            border-radius: 8px;
            background-color: var(--fundo-secundario); 
            text-align: center;
            font-size: 1.1em;
            font-weight: bold;
            color: var(--cor-principal);
        }

        /* Capital Provincial */
        #capital-info {
            margin-top: 10px; 
            padding: 10px; 
            border: 2px dashed var(--cor-secundaria); 
            border-radius: 4px; 
            background-color: var(--fundo-secundario); 
            text-align: center; 
            color: var(--cor-principal); 
            font-weight: bold; 
            display: none;
        }

        /* Contêiner do Mapa */
        #map {
            width: 100%;
            height: 400px; 
            border-radius: 8px;
            border: 3px solid var(--cor-principal); 
            margin: auto;
            max-width: 600px; 
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Divisão Político-Administrativa de Angola</h1>
    <div class="info">Estrutura baseada na lista limpa anterior. O ficheiro .numbers continha dados corrompidos.</div>

    <label for="provincia">Província:</label>
    <select id="provincia">
        <option value="">A carregar Províncias...</option>
    </select>

    <div id="capital-info"></div>

    <label for="municipio">Município:</label>
    <select id="municipio" disabled>
        <option value="">Selecione o Município</option>
    </select>

    <label for="comuna">Comuna:</label>
    <select id="comuna" disabled>
        <option value="">Selecione a Comuna</option>
    </select>
    
    <div class="contador-totais" id="contador-totais">
        A carregar dados...
    </div>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    // ****************************************************
    // DADOS COMPLETOS DA DPA - ESTRUTURA MANTIDA (A MAIS LIMPA DISPONÍVEL)
    // ****************************************************

    // Coordenadas das Capitais de Província e Municípios Chave (Aproximadas para centrar o mapa)
    const COORDENADAS_ANGOLA = {
        "LUANDA": [-8.838333, 13.234444], "CAXITO": [-8.5702, 13.6558], "BENGUELA": [-12.5761, 13.407], "CUITO": [-12.3929, 16.9427], "CABINDA": [-5.5645, 12.1963], "MENONGUE": [-14.6586, 17.6836], "NDALATANDO": [-9.3006, 15.1633], "SUMBE": [-11.2053, 13.8436], "ONDJIVA": [-17.0708, 15.7339], "HUAMBO": [-12.7758, 15.7397], "LUBANGO": [-14.915, 13.4908], "CATETE": [-9.0308, 13.6264], "DUNDO": [-7.352, 20.8358], "SAURIMO": [-9.6608, 20.3917], "MALANJE": [-10.8406, 16.3394], "LUENA": [-11.7892, 19.907], "UÍGE": [-7.6083, 15.0617], 
        
        // Cidades Renomeadas/Novas Capitais (com base na estrutura fornecida)
        "MOÇÂMEDES": [-15.1961, 12.1528], 
        "MBANZA KONGO": [-6.275, 14.25], 
        "CUITO CUANAVALE": [-15.15, 19.16], // Capital do CUANDO
        "CAZOMBO": [-11.9167, 22.9000] // Capital de MOXICO LESTE (Aprox)
    };

    // A sua estrutura DPA - **MANTIDA, PORQUE O NOVO FICHEIRO TINHA DADOS CORROMPIDOS**
    const DPA_RAW = {
      "BENGO": { "Capital": "CAXITO", "Municipios": {
          "AMBRIZ": ["Ambriz", "Bela Vista", "Tabi"], "BULA ATUMBA": ["Bula Atumba", "Quiage"], "DANDE": ["Caxito", "Mabubas", "Quicabo"], "MUXALUANDO": ["Muxaluando", "Quixico", "Cage Mazumbo"], "NAMBUANGONGO": ["Canacassala", "Gombe", "Zala"], "PANGO ALUQUÉM": ["Pango Aluquém", "Cazuangongo"], "QUIBAXE": ["Quibaxe", "Paredes", "Coxo"], "PIRI": ["Piri"], "QUICUNZO": ["Quicunzo"], "ÚCUA": ["Úcua"], "PANGUILA": ["Panguila"], "BARRA DO DANDE": ["Barra do Dande"]
      }},
      "BENGUELA": { "Capital": "BENGUELA", "Municipios": {
          "BENGUELA": ["Benguela", "Zona A"], "BAÍA FARTA": ["Baía Farta"], "BALOMBO": ["Balombo", "Moca", "Mombolo"], "BOCOIO": ["Bocoio", "Cubal do Lumbo", "Monte Belo"], "CAIMBAMBO": ["Caimbambo", "Catove", "Viangombe"], "CATUMBELA": ["Catumbela", "Biopio"], "CHONGORÓI": ["Chongorói", "Chicuma"], "CUBAL": ["Cubal", "Caiuera"], "GANDA": ["Ganda", "Babaera", "Cassequem"], "LOBITO": ["Lobito", "Canata", "Catumbela"]
      }},
      "BIÉ": { "Capital": "CUITO", "Municipios": {
          "ANDULO": ["Andulo", "Cassumbe", "Chivaulo"], "CAMACUPA": ["Camacupa", "Cuanza", "Muinha"], "CATABOLA": ["Catabola", "Caiuera", "Sande"], "CHINGUAR": ["Chinguar", "Cutato", "Cangote"], "CHITEMBO": ["Chitembo", "Cachingues", "Malengue"], "CUEMBA": ["Cuemba", "Munhango", "Sachinemuna"], "CUITO": ["Cuito", "Cunje"], "CUNHINGA": ["Cunhinga"], "NHARÊA": ["Nharêa", "Gamba", "Caiele"], "LUANDO": ["Luando"], "RINGOMA": ["Ringoma"], "MUMBUÉ": ["Mumbué", "Mutumba", "Soma Cuanza"], "CALUCINGA": ["Calucinga"], "CHICALA": ["Chicala"], "CHIPETA": ["Chipeta", "Chiuca"], "UMPULO": ["Umpulo"], "LÚBIA": ["Lúbia", "Dando"], "CAMBÂNDUA": ["Cambândua"], "BELO HORIZONTE": ["Belo Horizonte"]
      }},
      "CABINDA": { "Capital": "CABINDA", "Municipios": {
          "CABINDA": ["Cabinda", "Tando Zinze", "Malembo"], "BELIZE": ["Belize", "Luali"], "BUCO-ZAU": ["Buco-Zau", "Necuto", "Inhuca"], "CACONGO": ["Cacongo", "Dinge", "Lândana"], "LIAMBO": ["Liambo"], "MASSABI": ["Massabi"], "MICONJE": ["Miconje"], "NGOIO": ["Ngoio"], "TANDO ZINZE": ["Tando Zinze"], "MALEMBO": ["Malembo"]
      }},
      "CUANDO": { "Capital": "CUITO CUANAVALE", "Municipios": {
          "CUITO CUANAVALE": ["Cuito Cuanavale", "Lupire"], "DIRICO": ["Dirico", "Xamavera"], "MAVINGA": ["Mavinga"], "RIVUNGO": ["Rivungo"], "XIPUNDO": ["Xipundo"], "DIMA": ["Cunjamba", "Cutuile"], "LUIANA": ["Luiana"], "MUCUSSO": ["Mucusso"], "LUENGUE": ["Luengue"]
      }},
      "CUANZA NORTE": { "Capital": "NDALATANDO", "Municipios": {
          "AMBACA": ["Camabatela", "Maúa", "Bindo"], "BANGA": ["Banga", "Cariamba"], "BOLONGONGO": ["Bolongongo"], "CAMBAMBE": ["Dondo", "Dange ya Menha", "São Pedro da Quilemba"], "CAZENGO": ["Caculo Camuiza", "Ndalatando"], "GOLUNGO ALTO": ["Golungo Alto", "Cambondo", "Quilombo kia Puto"], "LUCALA": ["Lucala", "Quiangombe"], "NGONGUEMBO": ["Quilombo dos Dembos", "Camame", "Cavunga"], "QUICULUNGO": ["Quiculungo"], "SAMBA CAJÚ": ["Samba Cajú", "Samba Lucala"], "MASSANGANO": ["Massangano", "Zenza do Itombe"], "CÊRCA": ["Cêrca"], "TANGO": ["Tango"], "TERREIRO": ["Terreiro", "Quiquiemba"], "ALDEIA NOVA": ["Aldeia Nova"], "CACULO CABAÇA": ["Caculo Cabaça"], "LUINGA": ["Luinga"]
      }},
      "CUANZA SUL": { "Capital": "SUMBE", "Municipios": {
          "AMBOIVA": ["Amboiva"], "CALULO": ["Calulo", "Cabuta"], "CASSONGUE": ["Cassongue", "Atôme", "Dumbi"], "CONDA": ["Conda", "Cunjo"], "EBO": ["Ebo", "Cassanje"], "GABELA": ["Gabela", "Assango"], "GUNGO": ["Gungo", "Gabela"], "MUSSENDE": ["Mussende", "Quipaxi"], "PORTO AMBOIM": ["Porto Amboim", "Capolo"], "QUIBALA": ["Quibala", "Data Cachibo"], "QUILENDA": ["Quilenda"], "SELES": ["Seles", "Botera"], "SUMBE": ["Sumbe", "Quicombo"], "WAKU KUNGO": ["Waku Kungo", "Gonguembo"], "QUIRIMBO": ["Quirimbo"], "MUNENGA": ["Munenga"], "QUISSONGO": ["Quissongo"], "SANGA": ["Sanga"], "GANGULA": ["Gangula"], "PAMBANGALA": ["Pambangala"], "CONDÉ": ["Condé"], "LONHE": ["Lonhe", "Cariango"], "QUENHA": ["Quenha"], "BOA ENTRADA": ["Boa Entrada"]
      }},
      "CUBANGO": { "Capital": "MENONGUE", "Municipios": {
          "CALAI": ["Calai"], "CUANGAR": ["Cuangar"], "CUCHI": ["Cuchi"], "CUTATO": ["Cutato", "Vissati"], "CAIUNDO": ["Caiundo", "Jamba Cueio"], "LONGA": ["Longa", "Baixa Longa"], "MENONGUE": ["Menongue"], "NANCOVA": ["Nancova", "Rito"], "SAVATE": ["Savate", "Bondo Caila"], "CHINGUANJA": ["Chinguanja"], "MAVENGUE": ["Mavengue", "Maué"]
      }},
      "CUNENE": { "Capital": "ONDJIVA", "Municipios": {
          "CAHAMA": ["Cahama", "Otchinjau"], "CUANHAMA": ["Ondjiva", "Móngua", "Evale"], "CUROCA": ["Curoca"], "CUVELAI": ["Cuvelai"], "NAMACUNDE": ["Namacunde", "Chiede"], "OMBANDJA": ["Xangongo", "Ombala yo Mungu"], "CHIÉDE": ["Chiede"], "NEHONE": ["Nehone", "Humbe"], "HUMBE": ["Humbe", "Mucope"], "MUPA": ["Mupa"], "NAULILA": ["Naulila"], "CHITADO": ["Chitado"], "CAFIMA": ["Cafima"], "CHISSUATA": ["Chissuata"]
      }},
      "HUAMBO": { "Capital": "HUAMBO", "Municipios": {
          "BAILUNDO": ["Bailundo", "Lunge", "Luvemba"], "CAÁLA": ["Caála", "Calenga"], "CACHIUNGO": ["Cachiungo", "Chinhama"], "CHICALA CHOLOANGA": ["Chicala", "Mbave"], "CHINJENJE": ["Chinjenje", "Chiaca"], "ECUNHA": ["Ecunha", "Quipeio"], "HUAMBO": ["Huambo", "Calima"], "LONDUIMBALI": ["Londuimbali", "Ussoque"], "LONGONJO": ["Longonjo", "Lépi"], "MUNGO": ["Mungo", "Cambuengo"], "UCUMA": ["Ucuma", "Cacoma", "Mundundo"], "BIMBE": ["Bimbe", "Hengue"], "SAMBO": ["Sambo", "Samboto"], "GALANGA": ["Galanga", "Cumbira"], "ALTO HAMA": ["Alto Hama"], "CHILATA": ["Chilata"], "CUIMA": ["Cuima", "Catata"]
      }},
      "HUÍLA": { "Capital": "LUBANGO", "Municipios": {
          "CACONDA": ["Caconda", "Gungue", "Uaba", "Cusse"], "CACULA": ["Cacula", "Tchicuquela"], "CALUQUEMBE": ["Caluquembe", "Calopi", "Negola"], "CHIBIA": ["Chibia", "Jau"], "CHICOMBA": ["Chicomba", "Cutenda"], "CHIPINDO": ["Chipindo", "Bambi"], "CUVANGO": ["Cuvango", "Vicungo"], "GAMBOS": ["Chiange", "Chimbemba"], "HUMPATA": ["Humpata"], "JAMBA MINEIRA": ["Cassinga", "Jamba Mineira"], "LUBANGO": ["Lubango", "Huíla"], "MATALA": ["Matala"], "QUILENGUES": ["Quilengues", "Impulo", "Dinde"], "QUIPUNGO": ["Quipungo", "Capelongo"], "DONGO": ["Dongo"], "HOQUE": ["Hoque"], "CAPELONGO": ["Capelongo", "Mulondo"], "CHITUTO": ["Chituto"], "CAPUNDA CAVILONGO": ["Capunda Cavilongo", "Quihita"], "VITI VIVALI": ["Viti Vivali"], "GALANGUE": ["Galangue"], "PALANCA": ["Palanca"], "CHICUNGO": ["Chicungo"]
      }},
      "ÍCOLO E BENGO": { "Capital": "CATETE", "Municipios": {
          "CATETE": ["Catete", "Cassoneca", "Caculo Cahango", "Caxicane"], "QUIÇAMA": ["Muxima", "Quixinge", "Demba Chio", "Mumbondo"], "CALUMBO": ["Calumbo"], "CABIRI": ["Cabiri"], "CABO LEDO": ["Cabo Ledo"], "BOM JESUS": ["Bom Jesus"], "SEQUELE": ["Funda", "Quifangondo", "Sequele"]
      }},
      "LUANDA": { "Capital": "LUANDA", "Municipios": {
          "BELAS": ["Belas", "Cabolombo", "Benfica"], "CACUACO": ["Cacuaco", "Kikolo"], "CAZENGA": ["Cazenga", "Kima Kieza"], "KILAMBA KIAXI": ["Kilamba Kiaxi", "Golfe", "Nova Vida"], "VIANA": ["Viana", "Estalagem", "Zango"], "MUSSULO": ["Mussulo"], "SAMBIZANGA": ["Sambizanga"], "RANGEL": ["Rangel"], "MAIANGA": ["Maianga"], "SAMBA": ["Samba"], "CAMAMA": ["Camama"], "MULENVOS": ["Mulenvos"], "KILAMBA": ["Kilamba"], "HOJI YA HENDA": ["Hoji Ya Henda"], "INGOMBOTA": ["Ingombota"], "TALATONA": ["Talatona"]
      }},
      "LUNDA NORTE": { "Capital": "DUNDO", "Municipios": {
          "CAMBULO": ["Cambulo", "Cachimo", "Nzage"], "CAPENDA CAMULEMBA": ["Capenda Camulemba", "Xinge"], "CAUNGULA": ["Caungula"], "CHITATO": ["Chitato"], "CUANGO": ["Cuango"], "CUÍLO": ["Cuílo", "Cualuanga"], "LUBALO": ["Lubalo", "Muxulurge"], "LUCAPA": ["Lucapa", "Camissomba"], "LÓVUA": ["Lóvua"], "XÁ-MUTEBA": ["Xá-Muteba"], "DUNDO": ["Dundo", "Luachimo"], "XÁ CASSAU": ["Xá Cassau", "Capalo"], "CAMAXILO": ["Camaxilo"], "LUANGUE": ["Luangue"], "LUREMO": ["Luremo"], "CANZAR": ["Canzar", "Luia"], "CASSANJE CALUCALA": ["Cassanje Calucala", "Iongo"], "MUSSUNGUE": ["Mussungue", "Caito"], "CAFUNFU": ["Cafunfu"]
      }},
      "LUNDA SUL": { "Capital": "SAURIMO", "Municipios": {
          "SAURIMO": ["Saurimo", "Mona Quimbundo"], "DALA": ["Dala"], "MUCONDA": ["Muconda"], "CACULO": ["Caculo"], "CHILUAGE": ["Chiluage"], "CASSAI-SUL": ["Cassai-Sul"], "XASSENGUE": ["Xassengue", "Cucumbi"], "ALTO CHICAPA": ["Alto Chicapa"], "SOMBO": ["Sombo"], "MURIEGE": ["Muriege"], "LUMA CASSAI": ["Luma Cassai"], "CAZAGE": ["Cazage"], "MUANGUEJI": ["Muangueji"], "CASSENGO": ["Cassengo"]
      }},
      "MALANJE": { "Capital": "MALANJE", "Municipios": {
          "MALANJE": ["Malanje", "Lembe"], "CACUSO": ["Cacuso", "Sequecua"], "CAHOMBO": ["Cahombo", "Micanda"], "CALANDULA": ["Calandula", "Cota"], "CAMBUNDI CATEMBO": ["Cambundi Catembo", "Dumba Cambango"], "CANGANDALA": ["Cangandala", "Caribua", "Cacamangola"], "KIWABA N'ZOJI": ["Kiwaba N'zoji", "Mufuma"], "KUNDA DYA BAZE": ["Kunda dya Baze", "Lemba"], "LUQUEMBO": ["Luquembo", "Damba ya Zanga"], "MARIMBA": ["Marimba", "Mangando"], "MASSANGO": ["Massango"], "QUELA": ["Quela", "Bângalas"], "QUIRIMA": ["Quirima", "Soutor"], "CATECO CANGOLA": ["Cateco Cangola"], "CUALE": ["Cuale"], "PUNGO A NDONGO": ["Pungo A Ndongo"], "NGOLA LUIJI": ["Ngola Luiji", "Cambaxe"], "QUIHUHU": ["Quihuhu", "Quinquengue"], "XANDEL": ["Xandel", "Moma"], "CAMBO SUINGINGE": ["Cambo Suinginge"], "MILANDO": ["Milando"], "QUITAPA": ["Quitapa"], "CAPUNDA": ["Capunda", "Quimbango", "Cunga Patenga"], "MUQUIXE": ["Muquixe"], "QUESSUA": ["Quessua"], "CACULAMA": ["Caculama", "Caxinga"], "MBANJI YA NGOLA": ["Mbanji Ya Ngola", "Cabamba"]
      }},
      "MOXICO": { "Capital": "LUENA", "Municipios": {
          "LUENA": ["Luena", "Cassongo"], "CAMANONGUE": ["Camanongue"], "CANGAMBA": ["Cangamba", "Cassamba", "Muié"], "CANGUMBE": ["Cangumbe"], "CHIÚME": ["Chiúme"], "LÉUA": ["Léua", "Liangongo"], "LUCUSSE": ["Lucusse"], "LUMBALA NGUIMBO": ["Lumbala Nguimbo", "Mussuma Mifete", "Sessa"], "NINDA": ["Ninda"], "ALTO CUITO": ["Alto Cuito"], "LUTEMBO": ["Lutembo", "Luvuei"], "LUTUAI": ["Lutuai"]
      }},
      "MOXICO LESTE": { "Capital": "CAZOMBO", "Municipios": {
          "CAZOMBO": ["Cazombo", "Lumbala Caquengue"], "LUACANO": ["Luacano"], "CAMEIA": ["Cameia"], "LUAU": ["Luau"], "NANA CANDUNDO": ["Nana Candundo"], "MACONDO": ["Macondo", "Calunda"], "CAIANDA": ["Caianda"], "LÓVUA DO ZAMBEZE": ["Lóvua do Zambeze"], "LAGO DILOLO": ["Lago Dilolo"]
      }},
      "NAMIBE": { "Capital": "MOÇÂMEDES", "Municipios": {
          "MOÇÂMEDES": ["Moçâmedes", "Fortaleza"], "BIBALA": ["Bibala", "Capangombe", "Caitou", "Lola"], "CAMUCUIO": ["Camucuio", "Mamué", "Chingo"], "TÔMBÚA": ["Tômbúa", "Saco do Giraul"], "VIREI": ["Virei", "Cainde"], "LUCIRA": ["Lucira", "Bentiaba"], "IONA": ["Iona"], "SACOMAR": ["Sacomar"], "CACIMBAS": ["Cacimbas"]
      }},
      "UÍGE": { "Capital": "UÍGE", "Municipios": {
          "UÍGE": ["Uíge", "Luanga", "Casseche", "Cancungo"], "AMBUILA": ["Ambuila"], "BEMBE": ["Bembe", "Mabala"], "BUNGO": ["Bungo"], "DAMBA": ["Damba", "Petecusso", "Camalamba", "Lêmboa"], "MAQUELA DO ZOMBO": ["Maquela do Zombo", "Quibocolo"], "MUCABA": ["Mucaba", "Uando Mucaba"], "NEGAGE": ["Negage", "Dimuca", "Quisseque"], "PURI": ["Puri"], "QUIMBELE": ["Quimbele", "Iccca"], "SANZA POMBO": ["Sanza Pombo", "Cuilo Pombo", "Uamba", "Afândega"], "SONGO": ["Songo", "Quivuenga"], "CANGOLA": ["Cangola", "Benga", "Caiongo"], "DANGE QUITEXE": ["Quitexe", "Aldeia Viçosa"], "MASSAU": ["Massau", "Macolo"], "VISTA ALEGRE": ["Vista Alegre", "Cambamba"], "ALTO ZAZA": ["Alto Zaza", "Cuango Calumbo"], "NOVA ESPERANÇA": ["Nova Esperança", "Buenga - Sul", "Cuíto Cumboso"], "MILINGA": ["Milinga", "Macocola"], "SACANDICA": ["Sacandica", "Cuilo Futa", "Béu"], "NSOSSO": ["Nsosso"], "LUCUNGA": ["Lucunga"], "QUIPEDRO": ["Quipedro"]
      }},
      "ZAIRE": { "Capital": "MBANZA KONGO", "Municipios": {
          "MBANZA KONGO": ["Mbanza Kongo", "Madimba", "Caluca", "Quiende"], "SOYO": ["Soyo", "Pedra de Feitiço"], "NZETO": ["Nzeto", "Musserra", "Quibala Norte"], "CUIMBA": ["Cuimba", "Buela", "Luvaca"], "NÓQUI": ["Nóqui", "Mpala"], "TOMBOCO": ["Tomboco", "Quinsimba", "Quinzau"], "LUVO": ["Luvo"], "LUFICO": ["Lufico"], "QUÉLO": ["Quélo"], "SERRA DE CANDA": ["Serra de Canda"], "QUINDEJE": ["Quindeje"]
      }}
    };

    // O objeto DPA final usa a contagem OFICIAL para o contador
    const DPA_DATA = {
        "Contabilidade_Oficial": {
            "Total_Provincias": 21, 
            "Total_Municipios": 326, // Total Oficial (Baseado no nome do ficheiro)
            "Total_Comunas": 378, // Total Oficial (Baseado no nome do ficheiro)
        },
        "PROVINCIAS": DPA_RAW 
    };


    const selectProvincia = document.getElementById('provincia');
    const selectMunicipio = document.getElementById('municipio');
    const selectComuna = document.getElementById('comuna');
    const capitalInfo = document.getElementById('capital-info');
    const contadorTotais = document.getElementById('contador-totais');
    
    let map = null;
    let marker = null; 

    // ****************************************************
    // LÓGICA DO MAPA
    // ****************************************************

    function obterCoordenadas(nomeLocal) {
        if (!nomeLocal) return null;
        // Normaliza o nome (Remove acentos, espaços duplos e garante maiúsculas)
        const chave = nomeLocal.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/\s+/g, ' ').trim();
        return COORDENADAS_ANGOLA[chave];
    }

    function moverMapa(coords, local, zoom) {
        if (!coords) return;
        
        if (marker) {
            map.removeLayer(marker);
        }
        
        const zoom
